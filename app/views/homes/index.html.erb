<div class="discription">
  <h1>ã•ã‚ã€è¨ºæ–­ã‚’å§‹ã‚ã¾ã—ã‚‡ã†ï¼</h1>
</div>

<div id="tinderslide">
  <ul>
    <% @diagnoses.each do |diagnose| %>
      <li data-diagnoses="<%= diagnose.text %>">
        <div class="diagnoseText"><%= diagnose.text %></div>
        <%= image_tag diagnose.image %>
        <div class="like"></div>
        <div class="dislike"></div>
        <h1 class="card text-center">ğŸ‘ˆ ã€€NOã€€ğŸ¤” YES ğŸ‘‰</h1>
      </li>
    <% end %>
  </ul>
  <%= form_with url: results_show_path, method: :get, local: true do |f| %>
  <%= f.number_field :count, id: "count", value: 0, min: 0, max: 5 %>
  <%= f.submit("", class: "noUser", id: "submit") %>
  <% end %>
</div>


<script>
  // ã‚¹ãƒ¯ã‚¤ãƒ—ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°ã®å®šæ•°ã‚’å®šç¾©
  var usersNum = 5
  var currentUserIndex = 0;
  var countUp = 0;
  var countLike = 0;
  var postReaction = function (diagnoses_id, reaction) {
    $.ajaxSetup({
        headers: {
            'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content'),
        }
    });
    
  }
  $("#tinderslide").jTinder({
    onDislike: function (item) {
      currentUserIndex++;
      checkUserNum();
      var diagnoses_id = item[0].dataset.diagnoses_id
      postReaction(diagnoses_id, 'dislike')
    },
    onLike: function (item) {
      currentUserIndex++;
      var diagnoses_id = item[0].dataset.diagnoses_id
      postReaction(diagnoses_id, 'like')
      // addLike++;
      // console.log(countLike);
      // console.log($("#count").val('') = Number(countLike));
      
      // $('#count').val(Number(countLike));
      // $("#count").val('') = Number(countLike);
      // console.log(countLike);
      // console.log($("#count").val('') = Number(countLike));
      ++countLike;
      $("#count").val(String(countLike));
      checkUserNum();
      // var valText = $('#count').defaultValue;
      // var val = Number(countLike) || 0;  // NaNã®ã¨ã0ã«ã™ã‚‹
      
    },
    animationRevertSpeed: 200,
    animationSpeed: 400,
    threshold: 1,
    likeSelector: '.like',
    dislikeSelector: '.dislike'
  });
  

  function checkUserNum() {
    // ã‚¹ãƒ¯ã‚¤ãƒ—ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°ã¨ã‚¹ãƒ¯ã‚¤ãƒ—ã—ãŸå›æ•°ãŒåŒã˜ã«ãªã‚Œã°addClassã™ã‚‹
    if (currentUserIndex === usersNum){
      $(".noUser").addClass("is-active");
      // $("#count").value = addLike;
      $("#submit").click();
      return;
    }
  };

  const moons = ['ğŸ•ğŸ˜Š...........ğŸ’£', 'ğŸ•‘ğŸ˜œ..........ğŸ’£', 'ğŸ•’ğŸ˜.........ğŸ’£', 'ğŸ•“ğŸ¥±........ğŸ’£', 'ğŸ•”ğŸ¥´.......ğŸ’£', 'ğŸ••ğŸ¤”......ğŸ’£', 'ğŸ•–ğŸ˜Ÿ.....ğŸ’£', 'ğŸ•—ğŸ˜¨....ğŸ’£', 'ğŸ•˜ğŸ˜­...ğŸ’£', 'ğŸ•™ğŸ¤®..ğŸ’£', 'ğŸ•šğŸ¥º.ğŸ’£', 'ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥', 'ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥', 'ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥', 'ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥', 'ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥', 'ğŸ˜‡GAME_OVERğŸ˜‡', 'ğŸ˜‡GAME_OVERğŸ˜‡', 'ğŸ˜‡GAME_OVERğŸ˜‡', 'ğŸ˜‡GAME_OVERğŸ˜‡', 'ğŸ˜‡GAME_OVERğŸ˜‡', 'ğŸºãã‚“ãªã«æ‚©ã¾ã‚“ã§ã‚‚ãˆãˆã‚“ã‚„ã§ğŸº', 'ğŸºãã‚“ãªã«æ‚©ã¾ã‚“ã§ã‚‚ãˆãˆã‚“ã‚„ã§ğŸº', 'ğŸºãã‚“ãªã«æ‚©ã¾ã‚“ã§ã‚‚ãˆãˆã‚“ã‚„ã§ğŸº', 'ğŸºãã‚“ãªã«æ‚©ã¾ã‚“ã§ã‚‚ãˆãˆã‚“ã‚„ã§ğŸº', 'ğŸºãã‚“ãªã«æ‚©ã¾ã‚“ã§ã‚‚ãˆãˆã‚“ã‚„ã§ğŸº', 'ğŸºğŸºãã‚“ãªã«æ‚©ã¾ã‚“ã§ã‚‚ãˆãˆã‚“ã‚„ã§ğŸºğŸº', 'ğŸºğŸºãã‚“ãªã«æ‚©ã¾ã‚“ã§ã‚‚ãˆãˆã‚“ã‚„ã§ğŸºğŸº', 'ğŸºğŸºãã‚“ãªã«æ‚©ã¾ã‚“ã§ã‚‚ãˆãˆã‚“ã‚„ã§ğŸºğŸº', 'ğŸºğŸºğŸºãã‚“ãªã«æ‚©ã¾ã‚“ã§ã‚‚ãˆãˆã‚“ã‚„ã§ğŸºğŸºğŸº', 'ğŸºğŸºğŸºãã‚“ãªã«æ‚©ã¾ã‚“ã§ã‚‚ãˆãˆã‚“ã‚„ã§ğŸºğŸºğŸº', 'ğŸºğŸºğŸºãã‚“ãªã«æ‚©ã¾ã‚“ã§ã‚‚ãˆãˆã‚“ã‚„ã§ğŸºğŸºğŸº', 'ğŸºğŸºğŸºãã‚“ãªã«æ‚©ã¾ã‚“ã§ã‚‚ãˆãˆã‚“ã‚„ã§ğŸºğŸºğŸº', 'ğŸºğŸºğŸºğŸºãã‚“ãªã«æ‚©ã¾ã‚“ã§ã‚‚ãˆãˆã‚“ã‚„ã§ğŸºğŸºğŸºğŸº', 'ğŸºğŸºğŸºğŸºãã‚“ãªã«æ‚©ã¾ã‚“ã§ã‚‚ãˆãˆã‚“ã‚„ã§ğŸºğŸºğŸºğŸº', 'ğŸºğŸºğŸºğŸºãã‚“ãªã«æ‚©ã¾ã‚“ã§ã‚‚ãˆãˆã‚“ã‚„ã§ğŸºğŸºğŸºğŸº','ï¼¼ï¼¼ï¼¼ï¼¼ï¼¼ï¼¼ãã‚“ãªã«æ‚©ã¾ã‚“ã§ã‚‚ãˆãˆã‚“ã‚„ã§ï¼ï¼ï¼ï¼ï¼ï¼', 'ï¼¼ï¼¼ï¼¼ï¼¼ï¼¼ï¼¼ãã‚“ãªã«æ‚©ã¾ã‚“ã§ã‚‚ãˆãˆã‚“ã‚„ã§ï¼ï¼ï¼ï¼ï¼ï¼', 'ï¼¼ï¼¼ï¼¼ï¼¼ï¼¼ï¼¼ãã‚“ãªã«æ‚©ã¾ã‚“ã§ã‚‚ãˆãˆã‚“ã‚„ã§ï¼ï¼ï¼ï¼ï¼ï¼', 'ï¼¼ï¼¼ï¼¼ï¼¼ï¼¼ï¼¼ãã‚“ãªã«æ‚©ã¾ã‚“ã§ã‚‚ãˆãˆã‚“ã‚„ã§ï¼ï¼ï¼ï¼ï¼ï¼', 'ï¼¼ï¼¼ï¼¼ï¼¼ï¼¼ï¼¼ãã‚“ãªã«æ‚©ã¾ã‚“ã§ã‚‚ãˆãˆã‚“ã‚„ã§ï¼ï¼ï¼ï¼ï¼ï¼', 'ï¼¼ï¼¼ï¼¼ï¼¼ï¼¼ï¼¼ãã‚“ãªã«æ‚©ã¾ã‚“ã§ã‚‚ãˆãˆã‚“ã‚„ã§ï¼ï¼ï¼ï¼ï¼ï¼', 'ï¼¼ï¼¼ï¼¼ï¼¼ï¼¼ï¼¼ãã‚“ãªã«æ‚©ã¾ã‚“ã§ã‚‚ãˆãˆã‚“ã‚„ã§ï¼ï¼ï¼ï¼ï¼ï¼', 'ï¼¼ï¼¼ï¼¼ï¼¼ï¼¼ï¼¼ãã‚“ãªã«æ‚©ã¾ã‚“ã§ã‚‚ãˆãˆã‚“ã‚„ã§ï¼ï¼ï¼ï¼ï¼ï¼', 'ï¼¼ï¼¼ï¼¼ï¼¼ï¼¼ï¼¼ãã‚“ãªã«æ‚©ã¾ã‚“ã§ã‚‚ãˆãˆã‚“ã‚„ã§ï¼ï¼ï¼ï¼ï¼ï¼'];
  let count = 0;
  setInterval(()=> {
  	location.hash = moons[count % moons.length];
  	count++;
  }, 1200);
</script>